# üìä Lighthouse Reports Guide

This guide explains how to view and interpret Lighthouse performance reports generated by our CI/CD pipeline.

## üîç Where to Find Reports

### 1. **GitHub Actions Artifacts**

For every PR and push to main:

1. Go to the [Actions tab](https://github.com/bugracinbat/shake-tracker/actions)
2. Click on any workflow run with "CI" or "Lighthouse CI"
3. Scroll down to the "Artifacts" section
4. Download the `lighthouse-reports` artifact (ZIP file)
5. Extract and open the HTML files in your browser

### 2. **Pull Request Comments**

On every pull request, you'll see an automated comment with:
- Performance scores summary
- Accessibility audit results  
- Direct links to download artifacts
- Instructions for viewing reports

### 3. **Lighthouse CI Dashboard** (Coming Soon)

We're working on setting up a permanent dashboard for tracking performance trends over time.

## üìã Report Types

### Performance Reports (`performance-report-*.html`)
- **Visual reports** with performance metrics
- Core Web Vitals scores
- Resource loading analysis
- Recommendations for improvement

### Performance Metrics (`performance-metrics-*.json`)
- **Raw data** in JSON format
- First Contentful Paint (FCP)
- DOM Content Loaded timing
- Resource count and sizes
- JavaScript heap usage

### Accessibility Audits (`accessibility-audit-*.json`)
- Accessibility score (0-100)
- List of detected issues
- Element-specific problems
- WCAG compliance check

## üìä Understanding Scores

### Performance Scores
- **Good**: ‚úÖ Fast performance
- **Needs Improvement**: ‚ö†Ô∏è Could be faster
- **Poor**: ‚ùå Slow performance

### Core Web Vitals Thresholds
| Metric | Good | Needs Improvement | Poor |
|--------|------|-------------------|------|
| First Contentful Paint | < 1.8s | 1.8s - 3.0s | > 3.0s |
| Largest Contentful Paint | < 2.5s | 2.5s - 4.0s | > 4.0s |
| Cumulative Layout Shift | < 0.1 | 0.1 - 0.25 | > 0.25 |

### Accessibility Scores
- **90-100**: ‚úÖ Excellent accessibility
- **80-89**: ‚ö†Ô∏è Good, minor issues
- **70-79**: ‚ö†Ô∏è Needs attention
- **< 70**: ‚ùå Significant accessibility problems

## üõ†Ô∏è Using Reports for Development

### 1. **Before Submitting PR**
```bash
# Run lighthouse tests locally
npm run test:lighthouse

# View reports
open lighthouse-reports/performance-report-*.html
```

### 2. **Analyzing Performance Issues**
- Check resource count (aim for < 50)
- Monitor bundle size (< 1MB recommended)
- Look for unused CSS/JS
- Optimize images and assets

### 3. **Fixing Accessibility Issues**
- Add alt text to images
- Ensure proper heading hierarchy
- Label form inputs
- Check color contrast

### 4. **Tracking Improvements**
- Compare scores before/after changes
- Use trend data from daily reports
- Monitor regression in CI

## üîß Local Development

### Running Lighthouse Locally
```bash
# Start development server
npm run dev

# In another terminal, run lighthouse tests
npm run test:lighthouse

# View generated reports
npm run lighthouse:report
```

### Manual Lighthouse Audit
```bash
# Install lighthouse globally
npm install -g lighthouse

# Run audit on local server
lighthouse http://localhost:5173 --output html --output-path report.html

# Open report
open report.html
```

## üìà Performance Monitoring

### Automated Monitoring
- **Daily reports**: Automatic performance tracking
- **PR checks**: Performance regression detection
- **Trend analysis**: Historical performance data

### Setting Performance Budgets
Edit `lighthouseci.json` to set custom thresholds:

```json
{
  "ci": {
    "assert": {
      "assertions": {
        "categories:performance": ["error", {"minScore": 0.8}],
        "first-contentful-paint": ["error", {"maxNumericValue": 2000}]
      }
    }
  }
}
```

## üö® Troubleshooting

### Common Issues

**Reports not generating?**
- Check if dev server started successfully
- Verify Playwright installation
- Look for console errors in CI logs

**Low performance scores?**
- Enable production build for testing
- Check for development-only code
- Verify resource optimization

**Accessibility failures?**
- Run tests in headed mode to see visual issues
- Use browser dev tools accessibility panel
- Check console for accessibility warnings

### Getting Help

1. Check [Lighthouse documentation](https://developers.google.com/web/tools/lighthouse)
2. Review [Web Vitals guide](https://web.dev/vitals/)
3. Open an issue with performance concerns

## üìö Additional Resources

- [Lighthouse Scoring Guide](https://developers.google.com/web/tools/lighthouse/v3/scoring)
- [Web.dev Performance](https://web.dev/performance/)
- [Accessibility Best Practices](https://web.dev/accessibility/)
- [Core Web Vitals](https://web.dev/vitals/)

---

*This guide is automatically updated with our CI/CD improvements*